:: 1) Variables
set SSLDIR=C:\Users\ngahngono_a\Desktop\sslfolder
set ALIAS=zcentric
set PASS=Cagipordo@

:: 2) Créer le keystore JKS auto-signé avec SAN=IP
mkdir "%SSLDIR%"
keytool -genkeypair ^
  -alias %ALIAS% ^
  -keyalg RSA -keysize 2048 -sigalg SHA256withRSA ^
  -validity 825 ^
  -keystore "%SSLDIR%\zcentric.jks" -storetype JKS ^
  -storepass %PASS% -keypass %PASS% ^
  -dname "CN=10.179.143.43, OU=IT, O=CAGIP, L=sqy, ST=IDF, C=FR" ^
  -ext SAN=IP:10.179.143.43

:: 3) Exporter le certificat public (.cer)
keytool -exportcert -rfc ^
  -alias %ALIAS% ^
  -keystore "%SSLDIR%\zcentric.jks" -storepass %PASS% ^
  -file "%SSLDIR%\zcentric.cer"

:: 4) Vérifier le contenu
keytool -list -v -keystore "%SSLDIR%\zcentric.jks" -storepass %PASS%
